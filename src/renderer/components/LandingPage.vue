<template>
    <div class="layout">
        <Layout class="layout-container" style="flex-direction: row">
            <Sider hide-trigger style="background:#151935;height:100%;overflow:auto;color:white;" width="240">
                <file-tree ref="filetree" @on-select-change="onFileSelect"></file-tree>
            </Sider>
            <Layout style="flex-direction: column;height:100%;overflow: auto;">
                <Content :style="{padding: '20px', background: '#fff', 'flex-basis':0, height:'calc(100vh - 346px)'}">
                    <template v-if="files.length>0">
                        <code-panel></code-panel>
                    </template>
                    <template v-else>
                        <div class="empty-add-file">
                            <i @click="onAddFileClick" class="icon-add-file"></i>
                            <p class="desc">add file</p>
                        </div>
                    </template>
                </Content>
                <Layout style="height: 250px;flex-shrink:0;flex-grow:0;z-index:4;">
                    <Tabs class="tab-layout" type="card" :animated="false">
                        <TabPane label="LOGS">
                            <logs :logs="logger.logs"></logs>
                        </TabPane>
                        <TabPane label="BYTECODE">
                            {{bytecode}}
                            <copy-btn v-if="!!bytecode" :value="bytecode"></copy-btn>
                        </TabPane>
                        <TabPane label="ABI">
                            <tree-view v-if="!!abi" :data="abi"></tree-view>
                        </TabPane>
                    </Tabs>
                </Layout>
            </Layout>
            <Sider class="rightPane" width="320" style="height:100%;overflow: auto;">
                <div class="operation-panel">
                    <div class="compile-area">
                        <Select v-model="entry" class="entry-select" placeholder="请选择入口文件">
                            <Option v-for="item in files" :value="item.title" :key="item.id">{{ item.title }}</Option>
                        </Select>
                        <Button class="compileBtn" type="ghost" :loading="isCompiling" @click="onCompileClick">
                            {{$t('index.compile')}}
                        </Button>
                    </div>
                    <div class="deploy-area">
                        <Input class="contractName" v-model="contractName" placeholder="合约名称"></Input>
                        <Button class="deployBtn" type="ghost" @click="onDeploy">部署</Button>
                    </div>
                </div>
                <contract-list></contract-list>
            </Sider>
        </Layout>
        <!--密码提示框-->
        <Modal :loading="passwordConfirmModalLoading" v-model="passwordConfirmModalVisible" @on-ok="onPasswordOk">
            <Input v-model="tempPwd" title="解锁钱包" placeholder="请输入密码"/>
        </Modal>
        <!--部署确认提示-->
        <Modal
                class="confirmDeployModal"
                v-model="confirmDeployModalVisible"
                title="部署确认"
                @on-ok="onDeployOk"
                @on-cancel="onDeployCancel">
            <p>合约名称:{{contractName}}</p>
            <p>部署账户:{{currentWallet.account}}</p>
            <p>手续费类型:GXS</p>
            <p>部署费用:{{fee}}</p>
        </Modal>
    </div>
</template>

<script>
    import FileTree from './common/FileTree'
    import CodePanel from './LandingPage/CodePanel'
    import CopyBtn from '@/components/common/CopyBtn.vue'
    import ContractList from './LandingPage/ContractList'
    import AdmZip from 'adm-zip'
    import Logger from '@/util/logger'
    import Logs from './LandingPage/Logs'
    import {mapState, mapActions} from 'vuex'
    import {
        deploy_contract,
        unlock_wallet
    } from '@/services/WalletService'

    export default {
        name: 'landing-page',
        components: {Logs, FileTree, CodePanel, CopyBtn, ContractList},
        data() {
            return {
                passwordConfirmModalLoading: true,
                deployTransaction: null,
                passwordConfirmModalVisible: false,
                confirmDeployModalVisible: false,
                contractName: '',
                currentFee: {},
                entry: '',
                bytecode: '',
                abi: '',
                logger: new Logger(),
                networkPoint: '',
                networkPoints: [
                    {
                        title: '线上网络',
                        id: 0,
                        value: 0
                    },
                    {
                        title: '测试网络',
                        id: 1,
                        value: 1
                    }
                ],
                isCompiling: false,
                // temp
                tempPwd: ''
            }
        },
        mounted() {
            this.setCurrentFee()
            // TODO temp test
            this.bytecode = '0061736d01000000019a011960037f7e7f0060047f7e7e7f0060027f7e0060000060037f7f7f017f60037f7e7f017e60017f0060017e006000017f60027f7f017f6000017e60047e7e7e7e0060047e7e7e7e017f60027f7f0060047f7e7f7f0060067e7e7e7e7f7f017f60057f7e7e7e7e0060027f7c0060027e7e017f60017f017f60037e7e7e0060047f7f7e7f0060047f7f7f7f0060057f7f7f7f7f017f60037f7f7f000285041e03656e76085f5f616464746633001003656e76075f5f6571746632000c03656e760d5f5f657874656e646466746632001103656e76095f5f66697874667369001203656e760c5f5f666978756e7374667369001203656e760b5f5f666c6f617473697466000d03656e760d5f5f666c6f6174756e73697466000d03656e76085f5f6d756c746633001003656e76075f5f6e65746632000c03656e76085f5f737562746633001003656e760a5f5f756e6f7264746632000c03656e760561626f7274000303656e7610616374696f6e5f646174615f73697a65000803656e761063757272656e745f7265636569766572000a03656e760b64625f66696e645f693634000c03656e760a64625f6765745f693634000403656e760b64625f6e6578745f693634000903656e760d64625f72656d6f76655f693634000603656e760c64625f73746f72655f693634000f03656e760d64625f7570646174655f693634000e03656e760e6765745f7472785f6f726967696e000a03656e760a6778625f617373657274000d03656e76066d656d637079000403656e76066d656d736574000403656e76067072696e7469000703656e76067072696e7473000603656e76087072696e74735f6c000d03656e76077072696e747569000703656e7610726561645f616374696f6e5f64617461000903656e760e7472616e736665725f6173736574000b033d3c090909140009010902090200090d15160015150d1309130613060616041308130603060613040504041704180813090912120104040909040913040304050170010909050301000107e60325066d656d6f72790200165f5a6571524b3131636865636b73756d32353653315f001e165f5a6571524b3131636865636b73756d31363053315f001f165f5a6e65524b3131636865636b73756d31363053315f0020056170706c790021066d616c6c6f630032046672656500350d5f5f6173736572745f6661696c003907667072696e7466003a0666666c757368003b0a5f5f6f666c5f6c6f636b003c0a5f5f6c6f636b66696c65003d0c5f5f756e6c6f636b66696c65003e0c5f5f6f666c5f756e6c6f636b003f085f5f756e6c6f636b0040065f5f6c6f636b00410d5f5f737464696f5f636c6f736500420e5f5f7374646f75745f777269746500430c5f5f737464696f5f7365656b00440d5f5f737464696f5f777269746500450876667072696e74660046095f5f667772697465780048105f5f6572726e6f5f6c6f636174696f6e004a087374726572726f72004b077374726e6c656e004c067763746f6d62004d0a5f5f7369676e6269746c004e0d5f5f6670636c6173736966796c004f0666726578706c005007776372746f6d620051066d656d6368720052095f5f6c637472616e7300530e5f5f6c637472616e735f696d706c00540b5f5f6d6f5f6c6f6f6b7570005506737472636d700056095f5f746f77726974650057066d656d636d700058090f010041000b095928222426424344450ad0a9013c0b002000200141201058450b0b002000200141201058450b0d0020002001412010584100470bc30301057f4100410028020441f0006b2207360204024020012000520d00200741d0006a2001370300200741d8006a427f370300200741e0006a4200370300200741e8006a410036020020072001370348200720013703400240024002400240200242ffffffffb187d3d5ca00550d00200242808080e0cd9bb5d963510d0120024280808080808080ca3f520d03200741003602242007410136022020072007290320370218200741c0006a200741186a10271a0c030b20024280808080808080c0eb00510d0120024280808080b287d3d5ca00520d022007410036023c2007410236023820072007290338370200200741c0006a200710231a0c020b200741003602342007410336023020072007290330370208200741c0006a200741086a10251a0c010b2007410036022c2007410436022820072007290328370210200741c0006a200741106a10271a0b200741e0006a2802002203450d0002400240200741e4006a220528020022062003460d000340200641686a220628020021042006410036020002402004450d00200410370b20032006470d000b200741e0006a28020021060c010b200321060b20052003360200200610370b4100200741f0006a3602040bfd0203037f017e027f4100410028020441206b22083602041014210641b00610192006101841d00610192001101b2001200029030020022903082002290300101d200841106a41086a22052002290308370300200229030021062008410c6a200841106a410c6a280200360200200841086a2005280200360200200820063703102008200828021436020420082008280210360200200020012008102e0240200041246a2802002207200041206a2802002203460d00200741686a2102410020036b2104034020022802002903002001510d0120022107200241686a22052102200520046a4168470d000b0b200041086a2102024002400240024020072003460d00200741686a280200220528021820024641f000101520050d010c020b200041086a290300200041106a29030042808080c0f3a9d388322001100e22054100480d0120022005102a220528021820024641f00010150b200529030821010c010b41b0011019420021010b41f00610192001101b4100200841206a3602040b800305037f017e017f017e027f410028020441e0006b220421094100200436020420012802042102200128020021080240024002400240100c2203450d002003418104490d012003103221010c020b410021010c020b410020042003410f6a4170716b22013602040b20012003101c1a0b200941186a41106a220642003703002009420037032020094200370318200941186a2001410810161a200941186a41086a2204200141086a410810161a2006200141106a410810161a02402003418104490d00200110350b200941306a41086a2201200441086a2903003703002009290318210520092004290300370330200941c0006a41086a200129030037030020092009290330370340200020024101756a210102402002410171450d00200128020020086a28020021080b200941d0006a41086a200941c0006a41086a2903002207370300200941086a41086a20073703002009200929034022073703502009200737030820012005200941086a20081100004100200941e0006a36020441010ba80102017e037f4100410028020441206b220736020410142104413010192004101841d00010192001101b200741106a41086a2206200341086a2205290300370300200329030021042007410c6a200741106a410c6a280200360200200741086a200628020036020020072004370310200720072802143602042007200728021036020020002001200710292000290300200220052903002003290300101d4100200741206a3602040bbe0305037f027e027f017e027f410028020441e0006b2204210b41002004360204200128020421022001280200210a0240024002400240100c2203450d002003418104490d012003103221010c020b410021010c020b410020042003410f6a4170716b22013602040b20012003101c1a0b200b41106a41186a22074200370300200b4200370318200b4200370310200b4200370320200b41106a2001410810161a200b41106a41086a2208200141086a410810161a200b41106a41106a2204200141106a410810161a2007200141186a410810161a02402003418104490d00200110350b20082903002106200b41306a410c6a2004410c6a280200360200200b41306a41086a2201200441086a280200360200200b2903102105200b2004280200360230200b200441046a280200360234200b41c0006a41086a2001290300370300200b200b290330370340200020024101756a210102402002410171450d002001280200200a6a280200210a0b200b41d0006a41086a200b41c0006a41086a2903002209370300200b41086a2009370300200b200b2903402209370350200b2009370300200120052006200b200a1101004100200b41e0006a36020441010b0a00412010192001101b0bcb0103017f017e037f410028020441106b220421064100200436020420012802042102200128020021050240024002400240100c2201450d002001418104490d012001103221040c020b410021040c020b410020042001410f6a4170716b22043602040b20042001101c1a0b20064200370308200641086a2004410810161a2006290308210302402001418104490d00200410350b200020024101756a210102402002410171450d00200128020020056a28020021050b2001200320051102004100200641106a36020441010b1200411010192001101b411010192001101b0bbb0201067f4100410028020441106b22083602040240200041246a2802002207200041206a2802002203460d00200741686a2106410020036b2104034020062802002903002001510d0120062107200641686a22052106200520046a4168470d000b0b200041086a21050240024002400240024020072003460d00200741686a280200220628021820054641f000101520060d010c020b200041086a290300200041106a29030042808080c0f3a9d388322001100e22064100480d0120052006102a220628021820054641f00010150b20062903082002290300520d01410141d0011015410141800210150240200628021c200841086a101022074100480d0020052007102a1a0b20052006102b0c020b41b00110190c010b20082002360200410141a00210152005200620012008102c0b4100200841106a3602040bb50303037f017e047f410028020441206b220921084100200936020402402000411c6a280200220720002802182202460d00410020026b2103200741686a21060340200641106a2802002001460d0120062107200641686a22042106200420036a4168470d000b0b0240024020072002460d00200741686a28020021060c010b200141004100100f2206411f7641017341900610150240024020064180044d0d0020012006103222042006100f1a200410350c010b410020092006410f6a4170716b2204360204200120042006100f1a0b4128103622064200370310200642003703082006200036021820062004410810161a200641086a200441086a410810161a200641106a200441106a410810161a2006200136021c200820063602182008200629030022053703102008200628021c220736020c024002402000411c6a22012802002204200041206a2802004f0d00200420053703082004200736021020084100360218200420063602002001200441186a3602000c010b200041186a200841186a200841106a2008410c6a102d0b20082802182104200841003602182004450d00200410370b4100200841206a36020420060bca0202017e067f200128021820004641e00410152000290300100d51419005101502402000411c6a2205280200220720002802182203460d0020012903002102410020036b2106200741686a2108034020082802002903002002510d0120082107200841686a22042108200420066a4168470d000b0b200720034741d0051015200741686a210802400240200720052802002204460d00410020046b2103200821070340200741186a2208280200210620084100360200200728020021042007200636020002402004450d00200410370b200741106a200741286a280200360200200741086a200741206a29030037030020082107200820036a4168470d000b2000411c6a28020022072008460d010b0340200741686a220728020021042007410036020002402004450d00200410370b20082007470d000b0b2000411c6a2008360200200128021c10110bd80102017e037f410028020422062107200128021820004641d00210152000290300100d5141800310150240200141106a220529030020032802002203290308520d00200129030021042001200129030820032903007d370308410141a004101541002006220341606a220636020420062001410810161a200341686a200141086a410810161a200341706a2005410810161a200128021c2002200641181013024020042000290310540d00200041106a427e200442017c2004427d561b3703000b410020073602040f0b41c00341e003411e4190041039000baa0301047f024002402000280204200028020022066b41186d220441016a220541abd5aad5004f0d0041aad5aad500210702400240200028020820066b41186d220641d4aad52a4b0d0020052006410174220720072005491b2207450d010b200741186c103621060c020b41002107410021060c010b20001038000b20012802002105200141003602002006200441186c6a2201200536020020012002290300370308200120032802003602102006200741186c6a2104200141186a210502400240200041046a280200220620002802002207460d000340200641686a2202280200210320024100360200200141686a2003360200200141786a200641786a280200360200200141746a200641746a280200360200200141706a200641706a280200360200200141686a21012002210620072002470d000b200041046a2802002107200028020021060c010b200721060b20002001360200200041046a2005360200200041086a2004360200024020072006460d000340200741686a220728020021012007410036020002402001450d00200110370b20062007470d000b0b02402006450d00200610370b0ba30201067f4100410028020441206b2208360204200820013703180240200041246a2802002207200041206a2802002203460d00200741686a2106410020036b2104034020062802002903002001510d0120062107200641686a22052106200520046a4168470d000b0b200041086a2106024002400240024020072003460d00200741686a280200220528021820064641f000101520050d010c020b200041086a290300200041106a29030042808080c0f3a9d388322001100e22054100480d0120062005102a220528021820064641f00010150b418007101920082002360210410141a0021015200620054200200841106a10300c010b200820023602142008200841186a360210200841086a20062001200841106a102f0b4100200841206a3602040b8d0201047f4100410028020441306b2207360204200720023703282001290300100d5141b007101520072003360214200720013602102007200741286a36021841281036220342003703102003420037030820032001360218200741106a20031031200720033602202007200329030022023703102007200328021c220436020c024002402001411c6a22062802002205200141206a2802004f0d00200520023703082005200436021020074100360220200520033602002006200541186a3602000c010b200141186a200741206a200741106a2007410c6a102d0b2000200336020420002001360200200728022021032007410036022002402003450d00200310370b4100200741306a3602040bd80102017e037f410028020422062107200128021820004641d00210152000290300100d5141800310150240200141106a220529030020032802002203290308520d00200129030021042001200129030820032903007c370308410141a004101541002006220341606a220636020420062001410810161a200341686a200141086a410810161a200341706a2005410810161a200128021c2002200641181013024020042000290310540d00200041106a427e200442017c2004427d561b3703000b410020073602040f0b41c00341e003411841a0071039000be70103017f017e037f4100410028020441206b22063602042000280200210220002802042204280200210541f00710192005290300101b4180081019419008101920012004280200290300370300200120042802042204290300370308200141106a2205200441086a29030037030020062001410810161a2006410872200141086a410810161a200641106a2005410810161a2001200229030842808080c0f3a9d3883220002802082903002001290300220320064118101236021c024020032002290310540d00200241106a427e200342017c2003427d561b3703000b4100200641206a3602040b0900419408200010330bb904010c7f02402001450d00024020002802c041220d0d004110210d200041c0c1006a41103602000b200141086a200141046a41077122026b200120021b210202400240024020002802c441220a200d4f0d002000200a410c6c6a4180c0006a21010240200a0d0020004184c0006a220d2802000d0020014180c000360200200d20003602000b200241046a210a034002402001280208220d200a6a20012802004b0d002001280204200d6a220d200d28020041808080807871200272360200200141086a22012001280200200a6a360200200d200d28020041808080807872360200200d41046a22010d030b2000103422010d000b0b41fcffffff0720026b2104200041c8c1006a210b200041c0c1006a210c20002802c8412203210d03402000200d410c6c6a22014180c0006a210620014184c0006a280200220541046a210d0340200520062802006a2107200d417c6a2208280200220941ffffffff07712101024020094100480d000240200120024f0d000340200d20016a220a20074f0d01200a280200220a4100480d012001200a41ffffffff07716a41046a22012002490d000b0b20082001200220012002491b200941808080807871723602000240200120024d0d00200d20026a200420016a41ffffffff07713602000b200120024f0d040b200d20016a41046a220d2007490d000b41002101200b4100200b28020041016a220d200d200c280200461b220d360200200d2003470d000b0b20010f0b2008200828020041808080807872360200200d0f0b41000b870501087f20002802c44121010240024041002d00e049450d0041002802e44921070c010b3f002107410041013a00e0494100200741107422073602e4490b200721030240024002400240200741ffff036a41107622023f0022084d0d00200220086b40001a4100210820023f00470d0141002802e44921030b41002108410020033602e44920074100480d0020002001410c6c6a210220074180800441808008200741ffff037122084181f8034922061b6a2008200741ffff077120061b6b20076b2107024041002d00e0490d003f002103410041013a00e0494100200341107422033602e4490b20024180c0006a210220074100480d01200321060240200741076a417871220520036a41ffff036a41107622083f0022044d0d00200820046b40001a20083f00470d0241002802e44921060b4100200620056a3602e4492003417f460d0120002001410c6c6a22014184c0006a2802002206200228020022086a2003460d020240200820014188c0006a22052802002201460d00200620016a2206200628020041808080807871417c20016b20086a72360200200520022802003602002006200628020041ffffffff07713602000b200041c4c1006a2202200228020041016a220236020020002002410c6c6a22004184c0006a200336020020004180c0006a220820073602000b20080f0b02402002280200220820002001410c6c6a22034188c0006a22012802002207460d0020034184c0006a28020020076a2203200328020041808080807871417c20076b20086a72360200200120022802003602002003200328020041ffffffff07713602000b2000200041c4c1006a220728020041016a22033602c0412007200336020041000f0b2002200820076a36020020020b7b01037f024002402000450d0041002802d44922024101480d004194c80021032002410c6c4194c8006a21010340200341046a2802002202450d010240200241046a20004b0d00200220032802006a20004b0d030b2003410c6a22032001490d000b0b0f0b2000417c6a2203200328020041ffffffff07713602000b3f01027f02402000410120001b2201103222020d0003404100210241002802e849220041003a00002000450d012000110300200110322202450d000b0b20020b0e0002402000450d00200010350b0b0500100b000b4601017f4100410028020441106b22043602042004200236020c20042003360208200420013602042004200036020041002802ec4941f0c9002004103a1a4100103b1a100b000b3001017f4100410028020441106b22033602042003200236020c200020012002104621024100200341106a36020420020bd90301057f02400240024002402000450d00410021010240200028024c4100480d002000103d21010b02402000280214200028021c4d0d0020004100410020002802241104001a200041146a280200450d020b024020002802042203200028020822024f0d002000200320026bac410120002802281105001a0b20004200370310410021032000411c6a4100360200200041046a42003702002001450d030c020b41002105024041002802944a450d0041002802944a103b21050b0240103c2802002200450d000340410021010240200028024c4100480d002000103d21010b024020002802142203200028021c22024d0d00410021040240200041cc006a2802004100480d002000103d21042000411c6a2802002102200041146a28020021030b024002400240200320024d0d0020004100410020002802241104001a200041146a2802000d00417f210320040d010c020b024020002802042203200028020822024f0d002000200320026bac410120002802281105001a0b20004200370310410021032000411c6a4100360200200041046a42003702002004450d010b2000103e0b200320057221050b02402001450d002000103e0b200028023822000d000b0b103f20050f0b417f21032001450d010b2000103e0b20030b0c004198ca00104141a0ca000b0601017f20010b02000b08004198ca0010400b0900200041003602000b0900200041013602000b040041000b0a0020002001200210450b0400427f0b2901017f200028021c2203200028021420036b101a20012002101a200028021420026a200028021c6b0b9a0301057f4100410028020441a0026b22073602042007200236029c0241002106200741f0016a4100412810171a2007200728029c0236029802417f210202404100200120074198026a200741d0006a200741f0016a1047417f4c0d000240200028024c4100480d002000103d21060b20002802002102024020002c004a41004a0d0020002002415f713602000b20024120712103024002402000280230450d002000200120074198026a200741d0006a200741f0016a104721020c010b200041306a220541d0003602002000200741d0006a3602102000200736021c20002007360214200028022c21042000200736022c2000200120074198026a200741d0006a200741f0016a104721022004450d0020004100410020002802241104001a2000412c6a200436020020054100360200200041106a41003602002000411c6a4100360200200041146a22012802002104200141003602002002417f20041b21020b2000200028020022012003723602002001412071210102402006450d002000103e0b417f200220011b21020b4100200741a0026a36020420020bfa5505127f017e097f037e047f4100410028020441c03f6b2227360204202741b4056a410b6a210c202741c0056a410872210b202741c0056a410972210a202741f03b6a2109417e202741c0056a6b2108202741b4056a410c6a2107202741e0026a41366a2106202741e0026a41376a21054100211e410021264100212002400240024002400240024002400240024002400240024002400240024002400340201e20266a2126200122252d0000221e450d0120252101024002400240201e41ff0171221e450d000340201e4125460d02200141016a22012d000041ff0171221e0d000b0b2001211e0c010b2001211e0340200141016a2d00004125470d01201e41016a211e200141026a22012d00004125460d000b0b201e20256b221e41ffffffff0720266b220d4a0d0202402000450d0020002d00004120710d002025201e200010481a0b0240201e0d00200141016a2124417f211b024020012c0001221e41506a221141094b0d00200141036a202420012d000241244622011b22242d0000211e2011417f20011b211b4101202020011b21200b4100210e0240201e41187441187541606a2201411f4b0d004100210e034041012001744189d10471450d014101201e41187441187541606a74200e72210e202441016a22242c0000221e41606a22014120490d000b0b024002400240024002400240201e41ff0171412a470d0020242c000141506a220141094b0d0120242d00024124470d01200420014102746a410a360200202441036a2111410121202003202441016a2c00004104746a41807a6a280200220f417f4a0d050c020b4100210f201e41187441187541506a221e41094b0d0241002101202421110340417f210f0240200141cc99b3e6004b0d00417f2001410a6c2201201e6a201e41ffffffff0720016b4a1b210f0b200f2101201141016a22112c000041506a221e410a490d000b200f41004e0d040c080b20200d13202441016a21112000450d0220022002280200220141046a360200410021202001280200220f417f4a0d030b4100200f6b210f200e4180c00072210e0c020b202421110c010b410021204100210f0b4100211e417f2124024002400240024002400240024020112d0000412e470d0020112c00012224412a470d0120112c000241506a220141094b0d0220112d00034124470d02200420014102746a410a360200201141046a21012003201141026a2c00004104746a41807a6a28020021240c050b20112101410021100c050b201141016a2101202441506a221f41094b0d01410021110340417f21240240201141cc99b3e6004b0d00417f2011410a6c2211201f6a201f41ffffffff0720116b4a1b21240b4101211020242111200141016a22012c000041506a221f410a490d000c050b0b20200d13201141026a21012000450d0120022002280200221141046a360200201128020021240c020b41012110410021240c020b410021240b2024411f7641017321100b0340201e211120012c000041bf7f6a221e41394b0d10200141016a21012011413a6c201e6a41d0d3006a2d0000221e417f6a4108490d000b201e450d0f0240024002400240201e411b470d00201b417f4c0d010c130b201b4100480d012004201b4102746a201e36020020272003201b4104746a221e410c6a2802003602ac032027201e41086a2802003602a8032027201e41046a2802003602a4032027201e2802003602a0030b20000d014100211e0c020b2000450d08202741a0036a201e200210490b200e41ffff7b71221f200e200e4180c000711b21124100211a41b0d700211802400240024002400240024002400240024002400240024002400240024002400240024002400240024002400240024002400240024002400240024002402001417f6a2c0000221e415f71201e201e410f714103461b201e20111b221d41bf7f6a221e41374b0d002005210e0240024002400240024002400240024002400240024002400240024002400240024002400240024002400240024002400240024002400240024002400240201e0e3800200420000000202020202020202020202005202020200c202020202020202000200701000000200120202008090a0b20200d200f20200c000b02402024417f4a0d0020100d410b20272903a803212320272903a0032117202741003602ec05024020172023104e450d002023428080808080808080807f8521234101211441d0d70021130c030b2012418010710d0141d6d70041d1d700201241017122141b21130c020b20272903a0032223427f570d112012418010710d1541b2d70041b0d7002012410171221a1b211820234280808080105a0d160c170b4101211441d3d70021130b0240024020172023104f41014c0d00202741c0026a20172023202741ec056a1050202741b0026a20272903c002222320272903c8022217202320171000024020272903b0022223202741b0026a41086a2903002217420042001001450d00202720272802ec05417f6a3602ec050b201d412072221541e100470d01201341096a2013201d41207122251b21182024411a4b0d20411b20246b450d20202441656a211e428080808080808081c0002122420021210340202741d0016a20212022420042808080808080c081c0001007202741d0016a41086a290300212220272903d0012121201e41016a221e0d000b20182d0000412d470d1f202741a0016a20232017428080808080808080807f8520212022100920274190016a2021202220272903a001202741a0016a41086a290300100020274190016a41086a290300428080808080808080807f85211720272903900121230c200b2017202320172023100a2110201441036a212520124180c000710d0f200f20254c0d0f202741b0036a4120200f20256b221f418002201f41800249221e1b10171a200028020022244120712111201e0d0d201145211e201f211103400240201e410171450d00202741b0036a418002200010481a200028020021240b2024412071220e45211e201141807e6a221141ff014b0d000b200e0d0f201f41ff0171211f0c0e0b2024410048211e20232017420042001008450d11202741a0026a20232017420042808080808080c08dc0001007202720272802ec0541646a221f3602ec05202741a0026a41086a290300211720272903a00221230c120b20272903a0032123202741d8026a41046a4100360200202720233e02d8022027202741d8026a3602a003417f2124202741d8026a21250c010b20272802a00321252024450d1f0b4100211e2025210e4100211102400340200e280200221f450d01202741d4026a201f104d22114100480d0120112024201e6b4b0d01200e41046a210e20242011201e6a221e4b0d000b0b20114100480d47201e4100480d3a20124180c0047122100d200c1f0b202741e0026a41366a20272903a0033c000041012124200621252005210e201f21120c180b104a280200104b21250c050b201141ff0171221e41074b0d2d0240201e0e08002a2b2c2d2e2f30000b20272802a00320263602004100211e0c340b20052125024020272903a0032223500d002005212503402025417f6a222520234207834230843c0000202342038822234200520d000b0b20124108710d104100211a41b0d700211820100d120c130b20244108202441084b1b21242012410872211241f800211d0b4100211a41b0d7002118024020272903a0032223500d00201d412071211e2005212503402025417f6a22252023a7410f7141a0d7006a2d0000201e723a0000202342048822234200520d000b2012410871450d1020272903a003500d10201d41047541b0d7006a21184102211a20100d110c120b2005212520100d100c110b20272802a003221e41c0d700201e1b21250b4100211a2025202541ffffffff07202420244100481b104c221e6a210e2024417f4c0d05201f2112201e21240c110b4100211a41b0d700211820272903a00322234280808080105a0d080c090b20110d010b202741b0036a201f200010481a0b02402000280200221e4120710d0020132014200010481a2000280200211e0b0240201e4120710d004190d80041a0d800201d412071410576221e1b41f0d7004180d800201e1b20101b4103200010481a0b024020124180c004714180c000470d00200f20254c0d00202741b0036a4120200f20256b221f418002201f41800249221e1b10171a20002802002224412071211102400240201e0d00201145211e201f211103400240201e410171450d00202741b0036a418002200010481a200028020021240b2024412071220e45211e201141807e6a221141ff014b0d000b200e0d02201f41ff0171211f0c010b20110d010b202741b0036a201f200010481a0b200f2025200f20254a1b211e0c2a0b2027420020237d22233703a0034101211a41b0d700211820234280808080105a0d040c050b201f2112201e2124200e2d0000450d0b0c2c0b20272802ec05211f0b41062024201e1b211c202741f0056a2009201f4100481b22162124034020274190026a202320171004221e100620274180026a2023201720272903900220274190026a41086a2903001009202741f0016a20272903800220274180026a41086a29030042004280808080e59ab78ec00010072024201e360200202441046a212420272903f0012223202741f0016a41086a29030022174200420010080d000b024002400240201f4101480d00201621110340201f411d201f411d481b210e02402024417c6a221e2011490d00200ead2117420021230340201e201e350200201786202342ffffffff0f837c2223428094ebdc03823e02002023428094ebdc03802123201e417c6a221e20114f0d000b2023a7221e450d002011417c6a2211201e3602000b024003402024221e20114d0d01201e417c6a2224280200450d000b0b201e2124201f200e6b221f41004a0d000b2027201f3602ec05201f417f4a0d020c010b2024211e20162111201f417f4a0d010b201c412d6a41096e41016a211802400240201541e600470d00201620184102746a211903404100201f6b2224410920244109481b2110024002402011201e4f0d00418094ebdc03201076211b4101201074417f6a211a4100210e201121240340202420242802002225201076200e6a3602002025201a71201b6c210e202441046a2224201e490d000b2011201141046a20112802001b2111200e450d01201e200e360200201e41046a211e0c010b2011201141046a20112802001b21110b2019201e201e20166b41027520184a1b211e2010201f6a221f4100480d000c020b0b03404100201f6b2224410920244109481b2110024002402011201e4f0d00418094ebdc03201076211b4101201074417f6a211a4100210e201121240340202420242802002225201076200e6a3602002025201a71201b6c210e202441046a2224201e490d000b2011201141046a20112802001b2111200e450d01201e200e360200201e41046a211e0c010b2011201141046a20112802001b21110b201120184102746a201e201e20116b41027520184a1b211e2010201f6a221f4100480d000b0b2027201f3602ec050b4100212402402011201e4f0d00201620116b41027541096c212420112802002225410a490d00410a210e0340202441016a21242025200e410a6c220e4f0d000b0b0240201c20244100201541e600471b6b201c410047201541e700462210716b220e201e20166b41027541096c41776a4e0d002016200e418080096a222541096d4102746a22184184807c6a211f410a210e0240202541096f222541016a41084a0d00410820256b2125410a210e0340200e410a6c210e2025417f6a22250d000b0b201f280200221b200e70212502400240201f41046a221a201e470d002025450d010b02400240201b200e6e4101710d004280808080808080b8c000212342002117201f20114d0d01200e418094ebdc03470d01201f417c6a2d0000410171450d010b4280808080808080b8c0002123420121170b4280808080808080ff3f212202402025200e41026d2219490d0042808080808080c0ff3f42808080808080e0ff3f20252019461b42808080808080e0ff3f201a201e461b21220b02402014450d0020132d0000412d470d002022428080808080808080807f8521222023428080808080808080807f8521230b202741e0016a20172023420020221000201f201b20256b222536020020272903e001202741e0016a41086a290300201720231001450d00201f2025200e6a222436020002402024418094ebdc03490d0020184180807c6a21240340202441046a41003602000240202420114f0d002011417c6a221141003602000b2024202428020041016a220e3602002024417c6a2124200e41ff93ebdc034b0d000b202441046a211f0b201620116b41027541096c212420112802002225410a490d00410a210e0340202441016a21242025200e410a6c220e4f0d000b0b201f41046a220e201e201e200e4b1b211e0b410020246b211f0240024002400340201e220e20114d0d01200e417c6a221e280200450d000b4101211b20100d010c020b4100211b2010450d010b201c45201c6a221e20244c0d0d2024417c480d0d201d417f6a211d201e417f6a20246b211c20124108712210450d0e0c150b201241087121100c140b4101211a41b1d70021182023428080808010540d010b2005212503402025417f6a22252023420a824230843c0000202342ffffffff9f0156211e2023420a8022172123201e0d000c020b0b20232117200521250b2017a7221e450d0103402025417f6a2225201e410a704130723a0000201e41094b2111201e410a6e211e20110d000c020b0b41b0d70041b5d7002024200520256b221e4a1b21182024201e4c211a0b2010450d010b20244100480d230b201241ffff7b7120122024417f4a1b211220272903a0032123024020240d00202350450d00200521252005210e410021240c020b2024202350200520256b6a221e2024201e4a1b21240b2005210e0b200e20256b221d20242024201d481b221c41ffffffff07201a6b4a0d20201a201c6a221b200f200f201b481b221e200d4a0d20024020124180c0047122120d00201b200f4e0d00202741b0036a4120201e201b6b221641800220164180024922111b10171a2000280200221f412071210e0240024020110d00200e4521112016210e034002402011410171450d00202741b0036a418002200010481a2000280200211f0b201f4120712210452111200e41807e6a220e41ff014b0d000b20100d02201641ff017121160c010b200e0d010b202741b0036a2016200010481a0b024020002d00004120710d002018201a200010481a0b0240201241808004470d00201b200f4e0d00202741b0036a4130201e201b6b221a418002201a4180024922111b10171a2000280200221f412071210e0240024020110d00200e452111201a210e034002402011410171450d00202741b0036a418002200010481a2000280200211f0b201f4120712210452111200e41807e6a220e41ff014b0d000b20100d02201a41ff0171211a0c010b200e0d010b202741b0036a201a200010481a0b0240201d20244e0d00202741b0036a4130201c201d6b221041800220104180024922111b10171a2000280200220e41207121240240024020110d00202445211120102124034002402011410171450d00202741b0036a418002200010481a2000280200210e0b200e412071221f452111202441807e6a222441ff014b0d000b201f0d02201041ff017121100c010b20240d010b202741b0036a2010200010481a0b024020002d00004120710d002025201d200010481a0b20124180c000470d1d201b200f4e0d1d202741b0036a4120201e201b6b222541800220254180024922111b10171a20002802002224412071210f0240024020110d00200f4521112025210f034002402011410171450d00202741b0036a418002200010481a200028020021240b2024412071220e452111200f41807e6a220f41ff014b0d000b200e0d1f202541ff017121250c010b200f0d1e0b202741b0036a2025200010481a0c1d0b202741c0016a20232017202120221000202741b0016a20272903c001202741c0016a41086a290300202120221009202741b0016a41086a290300211720272903b00121230b20272802ec05221f201f411f75221e6a201e732211ac21224100211e0240024002402011417f4c0d002022a722110d010c020b4100211e0340200c201e6a2022420a824230843c0000201e417f6a211e202242ffffffff9f015621112022420a802221212220110d000b2021a72211450d010b0340202741b4056a201e6a410b6a2011410a704130723a0000201e417f6a211e201141094b210e2011410a6e2111200e0d000b0b2007201e6a21110240201e0d002011417f6a221141303a00000b201441027221102011417e6a221b201d410f6a3a00002011417f6a201f411e76410271412b6a3a0000024020124108710d0020244101480d06202741c0056a211e0340202741d0006a20232017100322111005202741c0006a202320172027290350202741d0006a41086a2903001009202741306a2027290340202741c0006a41086a290300420042808080808080c081c0001007201e201141a0d7006a2d00002025723a0000202741306a41086a2903002117202729033021230240201e41016a2211202741c0056a6b4101470d00201e41016a412e3a0000201e41026a21110b2011211e202320174200420010080d000c080b0b202741c0056a211e034020274180016a20232017100322111005202741f0006a2023201720272903800120274180016a41086a2903001009202741e0006a2027290370202741f0006a41086a290300420042808080808080c081c0001007201e201141a0d7006a2d00002025723a0000202741e0006a41086a2903002117202729036021230240201e41016a2211202741c0056a6b4101470d00201e41016a412e3a0000201e41026a21110b2011211e202320174200420010080d000c070b0b201e417f6a211c201d417e6a211d201241087122100d070b4109211e0240201b450d00200e417c6a2802002210450d004100211e2010410a700d00410a21254100211e0340201e41016a211e20102025410a6c222570450d000b0b200e20166b41027541096c41776a2125201d41207241e600470d0541002110201c2025201e6b221e4100201e41004a1b221e201c201e481b211c0c060b4100211e20124180c0047122100d010b200f201e4c0d00202741b0036a4120200f201e6b221b418002201b4180024922111b10171a2000280200220e41207121240240024020110d002024452111201b2124034002402011410171450d00202741b0036a418002200010481a2000280200210e0b200e412071221f452111202441807e6a222441ff014b0d000b201f0d02201b41ff0171211b0c010b20240d010b202741b0036a201b200010481a0b0240201e450d0041002111034020252802002224450d01202741d4026a2024104d222420116a2211201e4b0d01024020002d00004120710d00202741d4026a2024200010481a0b202541046a21252011201e490d000b0b024020104180c000470d00200f201e4c0d00202741b0036a4120200f201e6b221f418002201f4180024922111b10171a2000280200220e41207121240240024020110d002024452111201f2124034002402011410171450d00202741b0036a418002200010481a2000280200210e0b200e4120712225452111202441807e6a222441ff014b0d000b20250d02201f41ff0171211f0c010b20240d010b202741b0036a201f200010481a0b200f201e200f201e4a1b211e0c160b202741c0056a21110340202741206a202320171003220e1005202741106a202320172027290320202741206a41086a290300100920272027290310202741106a41086a290300420042808080808080c081c00010072011221e200e41a0d7006a2d00002025723a0000202741086a2903002117202729030021230240201e41016a2211202741c0056a6b4101470d0020232017420042001001450d00201e41016a412e3a0000201e41026a21110b202320174200420010080d000b0b417f211e41fdffffff0720106b2007201b6b221f6b2024480d13201f20106a202441026a2011202741c0056a6b221a200820116a2024481b201a20241b221d6a212520124180c0047122120d04200f20254c0d04202741b0036a4120200f20256b221c418002201c41800249221e1b10171a200028020022244120712111201e0d02201145211e201c211103400240201e410171450d00202741b0036a418002200010481a200028020021240b2024412071220e45211e201141807e6a221141ff014b0d000b200e0d04201c41ff0171211c0c030b41002110201c202520246a201e6b221e4100201e41004a1b221e201c201e481b211c0b417f211e201c41feffffff07201c201072221841004722256b4a0d11201c20256a41016a211a0240201d41207241e6004722150d00202441ffffffff07201a6b4a0d1220244100202441004a1b21240c070b201f202420244100481b221eac2123201e417f4c0d03200721252023a7221e0d040c050b20110d010b202741b0036a201c200010481a0b024020002d00004120710d0020182010200010481a0b0240201241808004470d00200f20254c0d00202741b0036a4130200f20256b2210418002201041800249221e1b10171a20002802002224412071211102400240201e0d00201145211e2010211103400240201e410171450d00202741b0036a418002200010481a200028020021240b2024412071220e45211e201141807e6a221141ff014b0d000b200e0d02201041ff017121100c010b20110d010b202741b0036a2010200010481a0b024020002d00004120710d00202741c0056a201a200010481a0b0240201d201a6b22104101480d00202741b0036a41302010418002201041800249221e1b10171a20002802002224412071211102400240201e0d00201145211e2010211103400240201e410171450d00202741b0036a418002200010481a200028020021240b2024412071220e45211e201141807e6a221141ff014b0d000b200e0d02201041ff017121100c010b20110d010b202741b0036a2010200010481a0b024020002d00004120710d00201b201f200010481a0b024020124180c000470d00200f20254c0d00202741b0036a4120200f20256b221f418002201f41800249221e1b10171a20002802002224412071211102400240201e0d00201145211e201f211103400240201e410171450d00202741b0036a418002200010481a200028020021240b2024412071220e45211e201141807e6a221141ff014b0d000b200e0d02201f41ff0171211f0c010b20110d010b202741b0036a201f200010481a0b200f2025200f20254a1b211e0c0e0b2007212503402025417f6a22252023420a824230843c0000202342ffffffff9f0156211e2023420a8022172123201e0d000b2017a7221e450d010b03402025417f6a2225201e410a704130723a0000201e41094b211f201e410a6e211e201f0d000b0b0240200720256b41014a0d002025417f6a211e0340201e41303a00002007201e6b2125201e417f6a221f211e20254102480d000b201f41016a21250b2025417e6a2219201d3a0000417f211e2025417f6a2024411e76410271412b6a3a0000200720196b222441ffffffff07201a6b4a0d0b0b417f211e2024201a6a2224201441ffffffff07734a0d0a202420146a211a20124180c0047122120d09200f201a4c0d09202741b0036a4120200f201a6b221d418002201d41800249221e1b10171a200028020022254120712124201e0d07202445211e201d212403400240201e410171450d00202741b0036a418002200010481a200028020021250b2025412071221f45211e202441807e6a222441ff014b0d000b201f0d09201d41ff0171211d0c080b20272802a00320263602004100211e0c0a0b20272802a0032026ac3703004100211e0c090b20272802a00320263b01004100211e0c080b20272802a00320263a00000b4100211e0c060b20272802a00320263602004100211e0c050b20272802a0032026ac3703004100211e0c040b20240d010b202741b0036a201d200010481a0b024020002d00004120710d0020132014200010481a0b0240201241808004470d00200f201a4c0d00202741b0036a4130200f201a6b221d418002201d41800249221e1b10171a20002802002225412071212402400240201e0d00202445211e201d212403400240201e410171450d00202741b0036a418002200010481a200028020021250b2025412071221f45211e202441807e6a222441ff014b0d000b201f0d02201d41ff0171211d0c010b20240d010b202741b0036a201d200010481a0b0240024002400240024002400240024002400240024020150d0020162011201120164b1b221f21250340024002402025280200221e450d00410021110340200b20116a201e410a704130723a00002011417f6a2111201e41094b2124201e410a6e211e20240d000c020b0b410021110b200a20116a211e024002402025201f460d00201e202741c0056a4d0d010340201e417f6a221e41303a0000201e202741c0056a4b0d000b202741c0056a211e0c010b20110d00201e417f6a221e41303a00000b024020002d00004120710d00201e200a201e6b200010481a0b202541046a222520164d0d000b02402018450d0020002d00004120710d0041b0d8004101200010481a0b201c4101480d012025200e4f0d020340200a211e0240024020252802002211450d00200a211e0340201e417f6a221e2011410a704130723a0000201141094b21242011410a6e211120240d000b201e202741c0056a4d0d010b0340201e417f6a221e41303a0000201e202741c0056a4b0d000b0b024020002d00004120710d00201e201c4109201c4109481b200010481a0b201c41776a211e201c410a480d04201e211c202541046a2225200e490d000c040b0b201c417f4c0d06200e201141046a201b1b211f2010450d04201121250340200a210e024002402025280200221e450d00410021240340202741c0056a20246a41086a201e410a704130723a00002024417f6a2124201e41094b210e201e410a6e211e200e0d000b202741c0056a20246a41096a210e20240d010b200e417f6a220e41303a00000b0240024020252011460d00200e202741c0056a4d0d010340200e417f6a220e41303a0000200e202741c0056a4b0d000c020b0b02402000280200221e4120710d00200e4101200010481a2000280200211e0b200e41016a210e201e4120710d0041b0d8004101200010481a0b200a200e6b211e024020002d00004120710d00200e201e201c201c201e4a1b200010481a0b201c201e6b211c202541046a2225201f4f0d06201c417f4a0d000c060b0b201c221e41014e0d020c060b201c211e0b201e4101480d040b202741b0036a4130201e418002201e4180024922111b10171a2000280200220e41207121240240024020110d002024452111201e2124034002402011410171450d00202741b0036a418002200010481a2000280200210e0b200e4120712225452111202441807e6a222441ff014b0d000b20250d05201e41ff0171211e0c010b20240d040b202741b0036a201e200010481a20124180c000460d040c050b201121250340200a210e024002402025280200221e450d00410021240340202741c0056a20246a41086a201e410a704130723a00002024417f6a2124201e41094b210e201e410a6e211e200e0d000b202741c0056a20246a41096a210e20240d010b200e417f6a220e41303a00000b0240024020252011460d00200e202741c0056a4d0d010340200e417f6a220e41303a0000200e202741c0056a4b0d000c020b0b024020002d00004120710d00200e4101200010481a0b200e41016a210e201c4101480d0020002d00004120710d0041b0d8004101200010481a0b200a200e6b211e024020002d00004120710d00200e201e201c201c201e4a1b200010481a0b201c201e6b211c202541046a2225201f4f0d01201c417f4a0d000b0b201c4101480d00202741b0036a4130201c418002201c41800249221e1b10171a20002802002224412071211102400240201e0d00201145211e201c211103400240201e410171450d00202741b0036a418002200010481a200028020021240b2024412071220e45211e201141807e6a221141ff014b0d000b200e0d02201c41ff0171211c0c010b20110d010b202741b0036a201c200010481a0b20002d00004120710d002019200720196b200010481a0b20124180c000470d010b200f201a4c0d00202741b0036a4120200f201a6b2225418002202541800249221e1b10171a20002802002224412071211102400240201e0d00201145211e2025211103400240201e410171450d00202741b0036a418002200010481a200028020021240b2024412071220e45211e201141807e6a221141ff014b0d000b200e0d02202541ff017121250c010b20110d010b202741b0036a2025200010481a0b200f201a200f201a4a1b211e0b201e4100480d030b201e200d4c0d000c020b0b20000d0e2020450d014101211e20042802042201450d0b200341106a20012002104920042802082201450d02200341206a200120021049200428020c2201450d03200341306a20012002104920042802102201450d05200341c0006a20012002104920042802142201450d06200341d0006a20012002104920042802182201450d07200341e0006a200120021049200428021c2201450d08200341f0006a20012002104920042802202201450d0920034180016a20012002104920042802242201450d0a20034190016a200120021049410121260c0e0b104a41cb003602000c0c0b410021260c0c0b4102211e0c080b4103211e0c070b410021260c090b4104211e0c050b4105211e0c040b4106211e0c030b4107211e0c020b4108211e0c010b4109211e0b2004201e4102746a2101034020012802000d01200141046a210141012126201e41016a221e41094d0d000c030b0b104a41163602000b417f21260b4100202741c03f6a36020420260beb0101067f02400240200228021022060d0041002106200210570d01200241106a28020021060b02402006200228021422076b20014f0d0020022000200120022802241104000f0b41002108024020022c004b4100480d00200020016a210341002108410021060340200120066a450d01200320066a21052006417f6a220421062005417f6a2d0000410a470d000b20022000200120046a41016a2208200228022411040022062008490d012004417f732101200320046a41016a2100200241146a28020021070b20072000200110161a200241146a2206200628020020016a360200200820016a0f0b20060bad0502017e017f4100410028020441106b22043602040240200141776a220141114b0d0002400240024002400240024002400240024002400240024002400240024002400240024020010e12000102030405060708090a0b0c0d0e0f1011000b20022002280200220141046a360200200020012802003602000c110b20022002280200220141046a360200200020013402003703000c100b20022002280200220141046a360200200020013502003703000c0f0b2002200228020041076a417871220141086a360200200020012903003703000c0e0b20022002280200220141046a360200200020013402003703000c0d0b20022002280200220141046a360200200020013502003703000c0c0b20022002280200220141046a360200200020013201003703000c0b0b20022002280200220141046a360200200020013301003703000c0a0b20022002280200220141046a360200200020013000003703000c090b20022002280200220141046a360200200020013100003703000c080b2002200228020041076a417871220141086a360200200020012903003703000c070b20022002280200220141046a360200200020013502003703000c060b2002200228020041076a417871220141086a360200200020012903003703000c050b2002200228020041076a417871220141086a360200200020012903003703000c040b20022002280200220141046a360200200020013402003703000c030b20022002280200220141046a360200200020013502003703000c020b2002200228020041076a417871220141086a360200200420012b03001002200041086a200441086a290300370300200020042903003703000c010b20022002280200410f6a417071220141106a36020020012903002103200041086a2001290308370300200020033703000b4100200441106a3602040b060041ace7000b7e01037f4100210202400240024002400340200241c0d8006a2d00002000460d0141d7002101200241016a220241d700470d000c020b0b200221012002450d010b41a0d9002102034020022d00002100200241016a2203210220000d00200321022001417f6a22010d000c020b0b41a0d90021030b2003410028021410530b1601017f2000410020011052220220006b200120021b0b150002402000450d0020002001410010510f0b41000b08002001423f88a70b4d02017e027f200142ffffffffffff3f832102024002402001423088a741ffff0171220341ffff01460d004104210420030d014103410220022000844200521b0f0b20022000845021040b20040be30101037f4100410028020441206b220636020402402002423088a7220441ffff0171220541ffff01460d0002400240024020050d0020012002420042001001450d01200620012002420042808080808080c0bbc0001007200641106a2006290300200641086a29030020031050200328020041887f6a210420062903182102200629031021010c020b2003200441ffff01714182807f6a3602002004418080027141feff0072ad423086200242ffffffffffff3f838421020c020b410021040b200320043602000b20002001370300200041086a20023703004100200641206a3602040baa0201017f4101210302402000450d000240200141ff004b0d00200020013a000041010f0b0240024002400240024002404100280200450d00200141ff0f4b0d0120002001413f71418001723a00012000200141067641c001723a000041020f0b200141807f714180bf03470d01200020013a000041010f0b20014180b003490d012001418040714180c003460d0120014180807c6a41ffff3f4b0d022000200141127641f001723a000020002001413f71418001723a000320002001410c76413f71418001723a000120002001410676413f71418001723a000241040f0b104a41d4003602000c020b20002001410c7641e001723a000020002001413f71418001723a000220002001410676413f71418001723a000141030f0b104a41d4003602000b417f21030b20030b9c0201047f41002106200241004721040240024002400240024002402002450d002000410371450d01200141ff01712103034020002d00002003460d04200241014721042002417f6a2105200041016a210020024101460d032005210220004103710d000c030b0b2002210520040d030c040b200221050b20040d010c020b200221050b024020002d0000200141ff0171460d000240024020054104490d00200141ff017141818284086c2104034020002802002004732202417f73200241fffdfb776a71418081828478710d02200041046a21002005417c6a220541034b0d000b0b2005450d020b200141ff01712102034020002d00002002460d01200041016a21002005417f6a22050d000c020b0b200521060b2000410020061b0b08002000200110540b270002402001450d0020012802002001280204200010552201200020011b0f0b4100200041001b0bb907010b7f02400240024002402000280208220420044118742004410874418080fc07717220044108764180fe03712004411876727222092000280200220341dea590a87946220a1b220520014102764f0d00200028020c220b200b411874200b410874418080fc077172200b4108764180fe0371200b4118767272200a1b2206200120054102746b220c4f0d012000280210220b200b411874200b410874418080fc077172200b4108764180fe0371200b4118767272200a1b220a200c4f0d02200a200672410371450d0341000f0b41000f0b41000f0b41000f0b2006410276210c024002400240024002400240024002400240024002400240200341dea590a879470d002000200541017622054101742206200c6a4102746a220941046a280200220b20014f0d01200928020022082001200b6b4f0d02200521094100210703402000200b20086a6a2d00000d0820022000200b6a1056220b450d0620044101460d0a4100210d200020072005200b410048220b1b22072009200420096b200b1b220441017622096a22054101742206200c6a4102746a220841046a280200220b20014f0d07200828020022082001200b6b490d000c070b0b2000200941017622084101742206200c6a4102746a220b41046a28020022044118742004410874418080fc07717220044108764180fe037120044118767272220420014f0d02200b280200220b411874200b410874418080fc077172200b4108764180fe0371200b4118767272220b200120046b4f0d032008210541002107034020002004200b6a6a2d00000d082002200020046a10562204450d0520094101460d0a4100210d200020072008200441004822041b22072005200920056b20041b220941017622056a22084101742206200c6a4102746a220b41046a28020022044118742004410874418080fc07717220044108764180fe037120044118767272220420014f0d06200b280200220b411874200b410874418080fc077172200b4108764180fe0371200b4118767272220b200120046b490d000c060b0b41000f0b41000f0b41000f0b41000f0b20002006200a4102766a4102746a220a41046a280200220420044118742004410874418080fc07717220044108764180fe037120044118767272200341dea590a8794622091b220b20014f0d054100210d200a280200220420044118742004410874418080fc07717220044108764180fe03712004411876727220091b22042001200b6b4f0d0041002000200b6a2000200b20046a6a2d00001b0f0b200d0f0b41000f0b41000f0b41000f0b41000f0b41000b6701027f20012d00002103024020002d00002202450d002002200341ff0171470d00200041016a2100200141016a2101034020012d0000210320002d00002202450d01200041016a2100200141016a21012002200341ff0171460d000b0b2002200341ff01716b0b5c01017f200020002c004a220141ff016a2001723a004a0240200028020022014108710d00200042003702042000200028022c220136021c200020013602142000200120002802306a36021041000f0b20002001412072360200417f0b4901037f4100210502402002450d000240034020002d0000220320012d00002204470d01200141016a2101200041016a21002002417f6a22020d000c020b0b200320046b21050b20050b0300000b0bf41d2e0041040b04507400000041100b064279652c20000041200b0848656c6c6f2c20000041300b16776974686472617720747278206f726967696e3a20000041d0000b147769746864726177207472782066726f6d3a20000041f0000b336f626a6563742070617373656420746f206974657261746f725f746f206973206e6f7420696e206d756c74695f696e646578000041b0010b126163636f756e74206e6f7420666f756e64000041d0010b2263616e6e6f74207061737320656e64206974657261746f7220746f20657261736500004180020b1e63616e6e6f7420696e6372656d656e7420656e64206974657261746f72000041a0020b2363616e6e6f74207061737320656e64206974657261746f7220746f206d6f64696679000041d0020b2e6f626a6563742070617373656420746f206d6f64696679206973206e6f7420696e206d756c74695f696e64657800004180030b3363616e6e6f74206d6f64696679206f626a6563747320696e207461626c65206f6620616e6f7468657220636f6e7472616374000041c0030b1761737365745f6964203d3d206f2e61737365745f6964000041e0030b242f7573722f6c6f63616c2f696e636c7564652f6778626c69622f61737365742e68707000004190040b0b6f70657261746f722d3d000041a0040b3b757064617465722063616e6e6f74206368616e6765207072696d617279206b6579207768656e206d6f64696679696e6720616e206f626a656374000041e0040b2d6f626a6563742070617373656420746f206572617365206973206e6f7420696e206d756c74695f696e64657800004190050b3263616e6e6f74206572617365206f626a6563747320696e207461626c65206f6620616e6f7468657220636f6e7472616374000041d0050b35617474656d707420746f2072656d6f7665206f626a656374207468617420776173206e6f7420696e206d756c74695f696e64657800004190060b176572726f722072656164696e67206974657261746f72000041b0060b156465706f73697420747278206f726967696e3a20000041d0060b136465706f736974207472782066726f6d3a20000041f0060b0a62616c616e63653a2000004180070b176f776e65722065786973742c20746f206d6f64696679000041a0070b0b6f70657261746f722b3d000041b0070b3363616e6e6f7420637265617465206f626a6563747320696e207461626c65206f6620616e6f7468657220636f6e7472616374000041f0070b0d61646462616c616e63652c2000004180080b022e00004190080b0220000041ecc9000b04b83300000041f0c9000b23417373657274696f6e206661696c65643a202573202825733a2025733a202564290a00004194ca000b04282500000041a8ca000b90010500000000000000000000000500000000000000000000000000000000000000000000000600000007000000c82500000004000000000000000000000100000000000000000000000000000affffffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000041d0d3000bd00319000a00191919000000000500000000000009000000000b00000000000000001900110a191919030a0700011b090b18000009060b00000b000619000000191919000000000000000000000000000000000e000000000000000019000a0d191919000d00000200090e00000009000e00000e000000000000000000000000000000000000000000000000000c000000000000000000000013000000001300000000090c00000000000c00000c000000000000000000000000000000000000000000000000001000000000000000000000000f000000040f0000000009100000000000100000100000000000000000000000000000000000000000000000000012000000000000000000000011000000001100000000091200000000001200001200001a0000001a1a1a000000000000000000000000000000000000000000000000001a0000001a1a1a0000000000000900000000000000000000000000000000000000000000000000000000000000000000001400000000000000000000001700000000170000000009140000000000140000140000000000000000000000000000000000000000000000000016000000000000000000000015000000001500000000091600000000001600001600000041a0d7000b10303132333435363738394142434445460041b0d7000b0a2d2b20202030583078000041c0d7000b07286e756c6c29000041d0d7000b132d30582b30582030582d30782b3078203078000041f0d7000b04696e6600004180d8000b04494e4600004190d8000b046e616e000041a0d8000b044e414e000041b0d8000b022e000041c0d8000b58542122190d010203114b1c0c10040b1d121e27686e6f7071622005060f1314151a08160728241718090a0e1b1f252383827d262a2b3c3d3e3f43474a4d58595a5b5c5d5e5f60616364656667696a6b6c727374797a7b7c000041a0d9000b8c0e496c6c6567616c20627974652073657175656e636500446f6d61696e206572726f7200526573756c74206e6f7420726570726573656e7461626c65004e6f74206120747479005065726d697373696f6e2064656e696564004f7065726174696f6e206e6f74207065726d6974746564004e6f20737563682066696c65206f72206469726563746f7279004e6f20737563682070726f636573730046696c65206578697374730056616c756520746f6f206c6172676520666f7220646174612074797065004e6f207370616365206c656674206f6e20646576696365004f7574206f66206d656d6f7279005265736f75726365206275737900496e7465727275707465642073797374656d2063616c6c005265736f757263652074656d706f726172696c7920756e617661696c61626c6500496e76616c6964207365656b0043726f73732d646576696365206c696e6b00526561642d6f6e6c792066696c652073797374656d004469726563746f7279206e6f7420656d70747900436f6e6e656374696f6e2072657365742062792070656572004f7065726174696f6e2074696d6564206f757400436f6e6e656374696f6e207265667573656400486f737420697320646f776e00486f737420697320756e726561636861626c65004164647265737320696e207573650042726f6b656e207069706500492f4f206572726f72004e6f207375636820646576696365206f72206164647265737300426c6f636b20646576696365207265717569726564004e6f207375636820646576696365004e6f742061206469726563746f72790049732061206469726563746f727900546578742066696c652062757379004578656320666f726d6174206572726f7200496e76616c696420617267756d656e7400417267756d656e74206c69737420746f6f206c6f6e670053796d626f6c6963206c696e6b206c6f6f700046696c656e616d6520746f6f206c6f6e6700546f6f206d616e79206f70656e2066696c657320696e2073797374656d004e6f2066696c652064657363726970746f727320617661696c61626c65004261642066696c652064657363726970746f72004e6f206368696c642070726f636573730042616420616464726573730046696c6520746f6f206c6172676500546f6f206d616e79206c696e6b73004e6f206c6f636b7320617661696c61626c65005265736f7572636520646561646c6f636b20776f756c64206f63637572005374617465206e6f74207265636f76657261626c650050726576696f7573206f776e65722064696564004f7065726174696f6e2063616e63656c65640046756e6374696f6e206e6f7420696d706c656d656e746564004e6f206d657373616765206f6620646573697265642074797065004964656e7469666965722072656d6f76656400446576696365206e6f7420612073747265616d004e6f206461746120617661696c61626c65004465766963652074696d656f7574004f7574206f662073747265616d73207265736f7572636573004c696e6b20686173206265656e20736576657265640050726f746f636f6c206572726f7200426164206d6573736167650046696c652064657363726970746f7220696e20626164207374617465004e6f74206120736f636b65740044657374696e6174696f6e2061646472657373207265717569726564004d65737361676520746f6f206c617267650050726f746f636f6c2077726f6e67207479706520666f7220736f636b65740050726f746f636f6c206e6f7420617661696c61626c650050726f746f636f6c206e6f7420737570706f7274656400536f636b65742074797065206e6f7420737570706f72746564004e6f7420737570706f727465640050726f746f636f6c2066616d696c79206e6f7420737570706f7274656400416464726573732066616d696c79206e6f7420737570706f727465642062792070726f746f636f6c0041646472657373206e6f7420617661696c61626c65004e6574776f726b20697320646f776e004e6574776f726b20756e726561636861626c6500436f6e6e656374696f6e207265736574206279206e6574776f726b00436f6e6e656374696f6e2061626f72746564004e6f2062756666657220737061636520617661696c61626c6500536f636b657420697320636f6e6e656374656400536f636b6574206e6f7420636f6e6e65637465640043616e6e6f742073656e6420616674657220736f636b65742073687574646f776e004f7065726174696f6e20616c726561647920696e2070726f6772657373004f7065726174696f6e20696e2070726f6772657373005374616c652066696c652068616e646c650052656d6f746520492f4f206572726f720051756f7461206578636565646564004e6f206d656469756d20666f756e640057726f6e67206d656469756d2074797065004e6f206572726f7220696e666f726d6174696f6e00000041b8e7000b9001050000000000000000000000050000000000000000000000000000000000000000000000080000000700000050340000000000000000000000000000020000000000000000000000000000ffffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000'
            this.abi = `{
  "____comment": "This file was generated by gxb-abigen. DO NOT EDIT - 2018-07-12T14:33:00",
  "version": "gxb::abi/1.0",
  "types": [{
      "new_type_name": "account_name",
      "type": "uint64"
    }
  ],
  "structs": [{
      "name": "deposit",
      "base": "",
      "fields": [{
          "name": "from",
          "type": "account_name"
        },{
          "name": "value",
          "type": "asset"
        }
      ]
    },{
      "name": "withdraw",
      "base": "",
      "fields": [{
          "name": "from",
          "type": "account_name"
        },{
          "name": "to",
          "type": "account_name"
        },{
          "name": "value",
          "type": "asset"
        }
      ]
    },{
      "name": "hi",
      "base": "",
      "fields": [{
          "name": "user",
          "type": "account_name"
        }
      ]
    },{
      "name": "bye",
      "base": "",
      "fields": [{
          "name": "user",
          "type": "account_name"
        }
      ]
    }
  ],
  "actions": [{
      "name": "deposit",
      "type": "deposit",
      "ricardian_contract": ""
    },{
      "name": "withdraw",
      "type": "withdraw",
      "ricardian_contract": ""
    },{
      "name": "hi",
      "type": "hi",
      "ricardian_contract": ""
    },{
      "name": "bye",
      "type": "bye",
      "ricardian_contract": ""
    }
  ],
  "tables": [],
  "ricardian_clauses": [],
  "error_messages": [],
  "abi_extensions": []
}`
            this.abi = JSON.parse(this.abi)
        },
        computed: {
            ...mapState('ContractOperation', ['files']),
            ...mapState(['wallets', 'currentWallet', 'assets']),
            fee() {
                if (!this.deployTransaction) {
                    return 0
                } else {
                    return this.deployTransaction.serialize().operations[0][1].fee.amount / Math.pow(10, this.currentFee.precision)
                }
            }
        },
        watch: {
            assets: function () {
                this.setCurrentFee()
            }
        },
        methods: {
            ...mapActions('ContractOperation', ['appendContract']),
            open(link) {
                this.$electron.shell.openExternal(link)
            },
            onClick() {

            },
            onFileSelect(evt) {
                // TODO code panel里面用index，file tree用nodekey，这里进行转换，因为files没有被注入nodekey，考虑优化
                // this.current = evt[0].nodeKey - 1
                console.log('teststtss')
            },
            archiveFiles(entryName) {
                // creating archives
                var zip = new AdmZip()

                // TODO 改this.files
                this.files.forEach(function (file) {
                    zip.addFile(file.title, Buffer.alloc(file.code.length, file.code))
                })

                var entryFile = {
                    name: 'app.json',
                    content: `{"main":"${entryName}"}`
                }

                zip.addFile('app.json', Buffer.alloc(entryFile.content.length, entryFile.content))
                // get everything as a buffer
                return zip.toBuffer()
                // or write everything to disk
                // zip.writeZip('./files.zip')
            },
            onCompileClick() {
                // 入口文件空判断
                if (!this.entry) {
                    this.$Message.warning('请先选择入口文件')
                    return
                }

                // 压缩文件，调用编译服务
                var buffer = this.archiveFiles(this.entry)

                var data = new FormData()
                data.append('bundle', new Blob([buffer]), 'bundle.zip')
                // var config = {
                //     onUploadProgress: function (progressEvent) {
                //         console.log('progggg', progressEvent)
                //     }
                // }

                const config = {
                    headers: {
                        'Content-Type': 'multipart/form-data'
                    }
                }

                this.isCompiling = true

                this.$http.post('http://localhost:3000/upload', data, config)
                    .then((res) => {
                        this.isCompiling = false
                        if (res.data.status === 'success') {
                            this.compileSuc(res.data)
                        } else {
                            this.compileFail(res.data)
                        }
                    })
                    .catch((err) => {
                        this.isCompiling = false
                        this.compileFail(err)
                        console.log('errrrr', err)
                    })
            },
            compileSuc(res) {
                this.$Message.success('编译成功')
                this.renderLog({info: res.stdout, level: 'success'})
                this.renderBytecode(res.wasm)
                this.renderAbi(res.abi)
                // this.renderLog(res.stdout)
            },
            compileFail(res) {
                this.$Message.error('编译失败')
                this.renderLog({info: res.stderr || res.message, level: 'error'})
                this.renderBytecode('')
                this.renderAbi('')
            },
            renderLog(log) {
                this.logger.push(log)
            },
            renderBytecode(bytecode) {
                this.bytecode = bytecode
            },
            renderAbi(abi) {
                this.abi = abi ? JSON.parse(abi) : ''
            },
            onDeploy() {
                if (!this.contractName) {
                    this.$Message.warning('请输入合约名称')
                    return
                }
                this.passwordConfirmModalVisible = true
            },
            onDeployOk() {
                deploy_contract({
                    from: this.currentWallet.account,
                    fee_id: this.currentFee.id,
                    password: this.tempPwd,
                    broadcast: true,
                    abi: this.abi,
                    contractName: this.contractName,
                    code: this.bytecode
                }).then((resp) => {
                    this.$store.dispatch('updateCurrentBalancesAndAssets')
                    // this.deployTransaction = resp
                    // 将部署过的合约保存在本地
                    console.log('deploy suc', resp)
                    this.appendContract(resp[0].ext)
                }).catch(ex => {
                    console.error('deploy contract fail', ex)
                })
            },
            onDeployCancel() {
                console.log('cacncncncn')
            },
            onPasswordOk() {
                console.log(this.currentWallet, this.currentFee)
                unlock_wallet(this.currentWallet.account, this.tempPwd).then(() => {
                    this.passwordConfirmModalVisible = false
                    this.confirmDeployModalVisible = true
                    return deploy_contract({
                        from: this.currentWallet.account,
                        fee_id: this.currentFee.id,
                        password: this.tempPwd,
                        broadcast: false,
                        abi: this.abi,
                        contractName: this.contractName,
                        code: this.bytecode
                    }).then((resp) => {
                        this.deployTransaction = resp
                    }).catch(ex => {
                        console.error('deploy contract fail', ex)
                    })
                }).catch(ex => {
                    this.$Message.error(ex.message)
                    this.passwordConfirmModalLoading = false
                    this.$nextTick(() => {
                        this.passwordConfirmModalLoading = true
                    })
                })
            },
            setCurrentFee() {
                this.currentFee = this.assets[0]
            },
            onAddFileClick() {
                this.$refs.filetree.append()
            }
        }
    }
</script>

<style lang="scss" scoped>
    @import '@/assets/scss/sprite.scss';

    .layout-container {
        height: calc(100vh - 64px - 32px);
    }

    .ivu-icon-plus {
        color: white;
        font-size: 20px;
    }

    .entry-select {
        width: 200px;
        margin-right: 15px;
    }

    .contractName {
        width: 200px;
        margin-right: 15px;
    }

    .network-point {
        width: 200px;
        float: left;
    }

    .compileBtn, .deployBtn {
        border-color: #6699ff;
        color: #6699ff;
    }

    .rightPane {
        background: #151935;
    }

    .operation-panel {
        border-top: 1px solid #313754;
        padding: 20px;
    }

    .entry-select /deep/ .ivu-select-selection, .contractName /deep/ .ivu-input {
        background: black;
        color: #9090c8;
        border: 1px solid #9090c8;

        &:hover {
            border-color: #6699ff;
        }
    }

    .deploy-area {
        margin-top: 20px;
    }

    .empty-add-file {
        .icon-add-file {
            margin: auto;
            display: block;
            cursor: pointer;
            transform: scale(0.5);
            @include sprite($add-file);
        }

        .desc {
            text-align: center;
            font-size: 20px;
            color: #999;
            margin-top: -40px;
        }
    }
</style>
